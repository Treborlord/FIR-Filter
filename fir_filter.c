/*
 * fir_filter.c
 *
 *  Created on: 14 Oct 2022
 *      Author: robert.howell
 */


#define DATATYPE float

static DATATYPE input_values[60] =
{
  14.80832428, 42.15658097, 54.37874427, 71.24064984, 94.21531206, 85.08679701, 92.67667474, 77.14190311, 63.03911208, 78.62527575,
  58.88416197, 9.317883017, -6.374913347, -23.76350564, -88.43588138, -119.484247, -79.21710758, -104.5797391, -129.0581992, -93.03536544,
 -82.41902389, -49.67963569, -61.58488894, -38.57576301, -27.89967505, -24.76952345, 26.85836588, 75.26664532, 58.59559254, 89.78325949,
  69.72546444, 113.1787841, 103.9343685, 59.41997255, 39.12395792, 48.21284805, 25.8576457, -1.319899986, -39.05203522, -57.21640262,
 -73.95098846, -101.9209554, -75.17773477, -121.5056421, -115.3564221, -94.60469757, -79.1437481, -77.40692263, -57.7821318, -25.14193898,
  5.227710357, 34.16750645, 36.1600397, 62.27624838, 77.97514617, 75.56158547, 106.7823722, 93.715181, 69.05951092, 81.31218981
};

float outputData[60] = {0};
static float mappings[10] = {0.011063, 0.031347, 0.087738, 0.159724, 0.210127, 0.210127, 0.159724, 0.087738, 0.031347, 0.011063};

void filterInputData()
{
    int i, j;

    for(i = 0; i < 9; i++)
    {
        for(j = 0; j < 10; j++)
        {
        	if (i + j >= 0)
        	{
        		outputData[i] = outputData[i] + (input_values[i + j - 9] * mappings[j]);
        	}
        }
    }

    for(i = 9; i < 60; i++)
    {
        for(j = 0; j < 5; j++)
        {
            outputData[i] += (input_values[i + j - 9] * mappings[j]);
            outputData[i] += (input_values[i - j] * mappings[j]);
        }
    }
}

void run_test(void)
{
    // Set GPIO
	filterInputData();
    // Clear GPIO
}
